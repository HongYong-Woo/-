**********2024-07-24 28일차**********
HR(Human Resource)
ERD(Entity Relation Diagram)

1.SELECT (데이터 검색) : 테이블에 저장된 데이터를 추출하는 명령어
				표시하고자 하는 열(column)만 선택하여 출력 할수 있다.(선택범위 지정)

concat()
as
not
BETWEEN a AND b
ORDER BY 기준으로할필드명
ASC => 오름차순
DESC => 내림차순

와일드 문자 : %, [], [^], _

[0-5] : 0-5 사이의 숫자로 시작하는 문자열
[^0-5] : 0-5 사이 숫자로 시작하지 않는 문자열
_ : 득정 위치에 있는 1개의 문자와 일치 '_구%'   => 축구 O   발야구 X ('__구%')

SELECT 실행 순서
1. FROM
2. WHERE
3. Group by
4. Having
5. SELECT
6. ORDER BY

SQL문은 실행순서가 없는 비절차적인 언어지만 내부적 실행 순서는 존재한다


조인(join) : 한테이블의 행을 다른 테이블의 행에 연결하여 두개 이상의 테이블을 결합하는 연산

-고객과 고객의 주문에 대한 데이터를 모두 출력
select *
from customer, orders
where customer.custid = orders.custid; -- 두 테이블의 연결 조건을 추가


하나의 스키마에서 여러 테이블이 존재하고 저장하고 있다.
테이블간의 관계를 기반으로 수행되는 연산
join sql :1999 문법 이전과 이후 구분
-join 종류는 등가 조인(equi join) ==> 오라클		:	natural / inner join
-outer join (외부 조인)	==> left outer join, right outer join
-self join (자체 조인)
-비등가 조인
-카티시안 곱 ==> cross join



**********2024-07-25 수업 29일차 **********
부속 질의(서브쿼리)

- 서브쿼리(subquery) - nested query(중첩 쿼리)
- 실행 순서 : WHERE 절의 부속질의를 먼저 처리하고 전체질의를 진행

SELECT bookname
FROM book
WHERE price = (SELECT MAX(price) FROM book);

- 서브쿼리는 SQL문이므로 결과는 테이블로 반환, 
- 단일행 - 단일열(1x1), 다중행 - 단일열(Nx1), 단일행 - 다중열(1xN), 다중행 - 다중열(NxN)
-- 질의 3-29 도서를 구매한 적이 있는 고객의 이름을 검색하시오
SELECT name
FROM customer
WHERE custid In(select custid from orders);

- 서브쿼리는 하위 부속질의와 상관부속질의어 두가지가 있는데, 
- 상위 부속질의어의 튜플을 이용하여 하위부속질의를 계산한다.

-- 질의 3-31 출판사 별로 출판사의 평균 도서가격보다 비싼 도서의 이름을 조회하시오.
-- 평균가보다 도서의 가격이 비싼지 비교한 쿼리 b1, b2 ==> 튜플 변수
SELECT publisher, bookname
from book b1
where b1.price > (SELECT avg(price)
from book b2 WHERE b1.publisher = b2.publisher);

서브쿼리에서 값을 하나만 가져오는게 아닌 여러개의 값을 비교할때
( 단일행 - 다중열(1xN), 다중행 - 다중열(NxN) )
-ANY(or) / ALL(and) / SOME(ANY랑 비슷)
 = any 는 in이랑 같음

- 서브 쿼리는 테이블을 복사할때 많이 활용됨 => 데이터는 복제해 오지만 제약조건은 복제하지않음
CREATE TABLE usertbl2 (SELECT * FROM usertbl);
alter를 이용해서 키 지정이 필요.
ALTER table usertbl2 add CONSTRAINT pk_usertbl2 PRIMARY KEY(userid);

-총합 중간합계가 필요한 경우가 있다. GROUP BY 절과 WITH ROLLUP문을 사용한다.